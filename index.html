<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Card Spotter – Shipping Supply Cost Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inconsolata&display=swap" rel="stylesheet" />
  <style>
    html, body{
      margin:0;padding:0;box-sizing:border-box;
      background:#FFFFFF;color:#000000;
      font-family:'Inconsolata',monospace;
    }
    .container{max-width:500px;margin:0 auto;padding:20px;}
    input{width:100%;padding:8px;margin-bottom:12px;font-size:1rem;border:1px solid #ccc;border-radius:4px;}
    button{
      background:#D1B355;color:#000000;border:none;
      padding:10px;font-weight:bold;width:100%;margin-top:10px;cursor:pointer;
    }
    button:hover{opacity:.9;}
    h2,h3{text-align:center}
    .description{text-align:center;font-size:.95rem;line-height:1.4;margin-bottom:20px;}
    .result p{font-weight:bold;margin:6px 0;}
    .extra-wrapper{margin-top:10px;border-top:1px solid #ccc;padding-top:10px;}
    .extra-item{margin-bottom:8px;}
    .add-btn{margin-top:0;}
  </style>
</head>
<body>
  <div class="container">
    <h2>Shipping Materials Cost Calculator</h2>
    <div class="description">
      Estimate your true supply cost per card shipment by entering what you pay per pack and how many of each item you use in one order.  
      Need something else? Add up to 10 extra materials below.
    </div>

    <!-- Core materials -->
    <label>Toploader – Pack Cost ($ / 25): <input id="toploaderCost" type="number" step="0.01" placeholder="e.g. 10" /></label>
    <label>Toploaders Used per Shipment: <input id="toploaderQty" type="number" step="1" placeholder="e.g. 1" /></label>

    <label>Penny Sleeves – Pack Cost ($ / 100): <input id="sleeveCost" type="number" step="0.01" placeholder="e.g. 1" /></label>
    <label>Sleeves Used per Shipment: <input id="sleeveQty" type="number" step="1" placeholder="e.g. 1" /></label>

    <label>Team Bags – Pack Cost ($ / 100): <input id="teamBagCost" type="number" step="0.01" placeholder="e.g. 3" /></label>
    <label>Team Bags Used per Shipment: <input id="teamBagQty" type="number" step="1" placeholder="e.g. 1" /></label>

    <label>Bubble Mailer – Cost per Mailer: <input id="mailerCost" type="number" step="0.01" placeholder="e.g. 0.30" /></label>
    <label>Label Paper / Sticker – Cost per Label: <input id="labelCost" type="number" step="0.01" placeholder="e.g. 0.05" /></label>

    <!-- Extra materials -->
    <div id="extraWrapper" class="extra-wrapper">
      <button id="addExtraBtn" class="add-btn" onclick="addExtra()">+ Add Extra Material</button>
    </div>

    <button onclick="calculateCosts()">Calculate</button>

    <div class="result">
      <h3>Results</h3>
      <p>Toploader Cost: $<span id="toploaderResult">--</span></p>
      <p>Sleeve Cost: $<span id="sleeveResult">--</span></p>
      <p>Team Bag Cost: $<span id="teamBagResult">--</span></p>
      <p>Bubble Mailer Cost: $<span id="mailerResult">--</span></p>
      <p>Label Cost: $<span id="labelResult">--</span></p>
      <div id="extraResults"></div>
      <p><strong>Total Supply Cost per Shipment: $<span id="totalCost">--</span></strong></p>
      <p><strong>Total Supply Cost per 100 Shipments: $<span id="totalCost100">--</span></strong></p>
    </div>
  </div>

<script>
  let extraCount = 0;
  const MAX_EXTRA = 10;

  function addExtra(){
    if(extraCount>=MAX_EXTRA) return;
    extraCount++;

    const wrapper = document.createElement('div');
    wrapper.className = 'extra-item';
    wrapper.id = `extra${extraCount}`;

    wrapper.innerHTML = `
      <label>Extra ${extraCount} – Cost per Unit ($): 
        <input type="number" step="0.01" class="extraCost" placeholder="0.00">
      </label>
      <label>Units Used per Shipment: 
        <input type="number" step="1" class="extraQty" placeholder="0">
      </label>
    `;
    document.getElementById('extraWrapper').insertBefore(wrapper, document.getElementById('addExtraBtn'));
    if(extraCount===MAX_EXTRA){
      document.getElementById('addExtraBtn').disabled = true;
    }
  }

  function calculateCosts(){
    const get = id => parseFloat(document.getElementById(id).value) || 0;

    const toploaderCost = (get('toploaderCost')/25)*get('toploaderQty');
    const sleeveCost    = (get('sleeveCost')/100)*get('sleeveQty');
    const teamBagCost   = (get('teamBagCost')/100)*get('teamBagQty');
    const mailerCost    = get('mailerCost');
    const labelCost     = get('labelCost');

    // Extra materials
    let extraTotal = 0;
    const extraLines = [];
    document.querySelectorAll('.extra-item').forEach((div, idx)=>{
      const cost  = parseFloat(div.querySelector('.extraCost').value)||0;
      const qty   = parseFloat(div.querySelector('.extraQty').value)||0;
      const subtotal = cost*qty;
      if(subtotal>0){
        extraTotal += subtotal;
        extraLines.push(`Extra ${idx+1} Cost: $${subtotal.toFixed(2)}`);
      }
    });

    const total = toploaderCost + sleeveCost + teamBagCost + mailerCost + labelCost + extraTotal;
    const total100 = total*100;

    // Output
    document.getElementById('toploaderResult').textContent = toploaderCost.toFixed(2);
    document.getElementById('sleeveResult').textContent = sleeveCost.toFixed(2);
    document.getElementById('teamBagResult').textContent = teamBagCost.toFixed(2);
    document.getElementById('mailerResult').textContent = mailerCost.toFixed(2);
    document.getElementById('labelResult').textContent = labelCost.toFixed(2);

    const extraResultsDiv = document.getElementById('extraResults');
    extraResultsDiv.innerHTML = extraLines.map(l=>`<p>${l}</p>`).join('');

    document.getElementById('totalCost').textContent = total.toFixed(2);
    document.getElementById('totalCost100').textContent = total100.toFixed(2);

    resizeIframe();
  }

  /* -------- auto-resize for Softr -------- */
  function resizeIframe(){
    const height = document.body.scrollHeight;
    window.parent.postMessage({iframeHeight:height},"*");
  }
  window.addEventListener('load',resizeIframe);
  window.addEventListener('resize',resizeIframe);
</script>
</body>
</html>
